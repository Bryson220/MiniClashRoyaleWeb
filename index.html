<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clash Royale Lite Replica Arena</title>
<style>
html,body {margin:0; padding:0; height:100%; background:#9aa0a6; font-family:Arial,sans-serif;}
#gameWrap {display:flex; justify-content:center; align-items:center; height:100vh;}
canvas {border-radius:10px; box-shadow:0 6px 20px rgba(0,0,0,0.25);}
#ui {position:absolute; bottom:20px; left:50%; transform:translateX(-50%); display:flex; gap:12px;}
.card-slot {width:100px; height:64px; background:#fff; border-radius:10px; display:flex; align-items:center; justify-content:flex-start; gap:8px; padding:8px; cursor:pointer;}
.card-slot.selected {outline:3px solid #66b3ff;}
.card-thumb {width:40px; height:40px; border-radius:6px; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold;}
.card-info {display:flex; flex-direction:column; font-size:12px;}
.card-cost {font-weight:700;}
.disabled {opacity:0.5; pointer-events:none;}
#elixir {width:180px; background:rgba(0,0,0,0.1); border-radius:8px; padding:6px;}
#elixir .bar {height:12px; border-radius:6px; background:linear-gradient(#2eb8ff,#006fbd); width:0%; transition:width 0.25s;}
#elixirVal {font-weight:bold; text-align:center; display:block;}
</style>
</head>
<body>
<div id="gameWrap">
<canvas id="c" width="540" height="960"></canvas>
</div>
<div id="ui">
  <div id="cards"></div>
  <div id="elixir">
    <span id="elixirVal">0/10</span>
    <div style="background:rgba(0,0,0,0.08); border-radius:6px; height:14px;">
      <div class="bar" id="elixirBar"></div>
    </div>
  </div>
</div>

<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');

const arena = {x:20, y:20, w:500, h:920}; // Arena boundaries
const water = {y:arena.y + arena.h/2 - 80, h:160}; // Central river
const bridgeW = 120;

const towers = [
  {team:'enemy', x:arena.x+60, y:arena.y+50, w:48, h:64, hp:300},
  {team:'enemy', x:arena.x+arena.w-108, y:arena.y+50, w:48, h:64, hp:300},
  {team:'player', x:arena.x+60, y:arena.y+arena.h-114, w:48, h:64, hp:300},
  {team:'player', x:arena.x+arena.w-108, y:arena.y+arena.h-114, w:48, h:64, hp:300}
];

const units = [];
let elixir=0, lastElixirTick=performance.now(), elMax=10, elRegenMs=2800;

const cardDefs = [
  {id:'knight', name:'Knight', cost:3, hp:100, dmg:12, size:18, speed:55},
  {id:'archer', name:'Archer', cost:2, hp:60, dmg:10, size:14, speed:95},
  {id:'giant', name:'Giant', cost:5, hp:200, dmg:18, size:26, speed:42}
];
const deck = [...cardDefs];
let selectedCardIndex = null;

// Mouse tracking
const mousePos = {x:0,y:0,insideArena:false};
canvas.addEventListener('mousemove',(e)=>{
  const rect = canvas.getBoundingClientRect();
  mousePos.x = (e.clientX-rect.left)*(canvas.width/rect.width);
  mousePos.y = (e.clientY-rect.top)*(canvas.height/rect.height);
  mousePos.insideArena = mousePos.x>=arena.x && mousePos.x<=arena.x+arena.w && mousePos.y>=arena.y && mousePos.y<=arena.y+arena.h;
});
canvas.addEventListener('mouseleave',()=>mousePos.insideArena=false);
canvas.addEventListener('click',()=>{
  if(selectedCardIndex===null || !mousePos.insideArena) return;
  const card = deck[selectedCardIndex];
  if(elixir<card.cost){ selectedCardIndex=null; updateCardUI(); return; }
  const lane = mousePos.x < arena.x + arena.w/2 ? 'left':'right';
  units.push({team:'player', x:mousePos.x, y:mousePos.y, size:card.size, hp:card.hp, dmg:card.dmg, speed:card.speed, lane});
  elixir -= card.cost; updateElixirUI(); updateCardUI(); selectedCardIndex=null; updateCardUI();
});

// Draw arena exactly like Clash Royale
function drawArena() {
  // Grass
  ctx.fillStyle='#cfeccf'; ctx.fillRect(arena.x,arena.y,arena.w,arena.h);
  // River
  ctx.fillStyle='#7cc6ff'; ctx.fillRect(arena.x,water.y,arena.w,water.h);
  // Bridges
  ctx.fillStyle='#b48a4f';
  ctx.fillRect(arena.x+60,water.y,bridgeW,water.h);
  ctx.fillRect(arena.x+arena.w-60-bridgeW,water.y,bridgeW,water.h);
  // Mid lane line
  ctx.strokeStyle='rgba(0,0,0,0.1)'; ctx.beginPath();
  ctx.moveTo(arena.x,arena.y+arena.h/2); ctx.lineTo(arena.x+arena.w,arena.y+arena.h/2); ctx.stroke();
}

// Draw towers
function drawTowers(){
  for(const t of towers){
    ctx.fillStyle=t.team==='player'?'#8b5a2b':'#6b2b2b';
    ctx.fillRect(t.x,t.y,t.w,t.h);
    const pct=t.hp/300;
    ctx.fillStyle='#4caf50'; ctx.fillRect(t.x,t.y-6,t.w*pct,4);
  }
}

// Draw units
function drawUnits(){
  for(const u of units){
    ctx.beginPath();
    ctx.fillStyle=u.team==='player'?'#2b9f49':'#d64545';
    ctx.arc(u.x,u.y,u.size,0,Math.PI*2); ctx.fill();
  }
}

// Game loop
function gameLoop(now){
  if(now-lastElixirTick>=elRegenMs){
    const points=Math.floor((now-lastElixirTick)/elRegenMs);
    elixir=Math.min(elMax,elixir+points); lastElixirTick+=points*elRegenMs;
    updateElixirUI();
  }
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawArena(); drawTowers(); drawUnits();
  requestAnimationFrame(gameLoop);
}

// Elixir UI
const elBar = document.getElementById('elixirBar');
const elVal = document.getElementById('elixirVal');
function updateElixirUI(){ elVal.textContent = elixir + '/10'; elBar.style.width = (elixir/elMax*100)+'%'; }

// Card UI
const cardsDiv = document.getElementById('cards');
deck.forEach((c,i)=>{
  const slot = document.createElement('div'); slot.className='card-slot'; slot.dataset.index=i;
  slot.innerHTML=`<div class="card-thumb" style="background:${i===0?'#4caf50':i===1?'#2196f3':'#795548'}">${c.name[0]}</div>
  <div class="card-info"><div style="font-weight:700">${c.name}</div><div class="card-cost">Cost: <span>${c.cost}</span></div></div>`;
  slot.addEventListener('click',()=>{ selectedCardIndex = selectedCardIndex===i?null:i; updateCardUI(); });
  cardsDiv.appendChild(slot);
});
function updateCardUI(){
  Array.from(cardsDiv.children).forEach((el,i)=>{
    const cost=deck[i].cost; el.classList.toggle('disabled',elixir<cost);
    el.classList.toggle('selected',selectedCardIndex===i);
  });
}

requestAnimationFrame(gameLoop);
</script>
</body>
</html>
